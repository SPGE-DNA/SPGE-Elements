// Language translation system
const translations = {    // English translations
    en: {
        // Navigation
        "nav-home": "Home",
        "nav-classrooms": "Classrooms",
        "nav-about": "About",
        "nav-experiments": "Experiments",
        "nav-contact": "Contact",
        
        // Hero section
        "hero-title": "The Periodic Table of SPGE \"John Atanasoff\"",
        "hero-subtitle": "Explore the elements that make our school unique through an interactive chemistry-themed experience",
        "search-placeholder": "Search for elements...",
        
        // Legend
        "legend-title": "Element Categories",
        "legend-science": "Science & Technology",
        "legend-humanities": "Humanities & Languages",
        "legend-sports": "Sports & Activities",
        "legend-values": "School Values",
        "legend-events": "Events & Clubs",
        "legend-admin": "Administration",
        
        // About section
        "about-title": "About Our School",
        "about-text-1": "SPGE \"John Atanasoff\" is a leading technical high school specializing in electronics, programming, and renewable energy. Founded in 1968, our school has been at the forefront of technical education in Bulgaria.",
        "about-text-2": "Our mission is to prepare the next generation of technology innovators through hands-on learning, industry partnerships, and cutting-edge facilities.",
        
        // Modal
        "modal-location": "Location:",
        "modal-contact": "Contact:",
        "modal-facts-title": "Element Facts",
        "modal-safety-title": "Safety Data",
        
        // Classrooms section
        "classrooms-title": "School Classrooms",
        "subject-title": "Subject",
        "teacher-title": "Teacher",
        "room-title": "Room",
        
        // Experiments page
        "experiments-title": "Virtual Chemistry Laboratory",
        "experiments-intro": "Explore interactive chemistry experiments from the safety of your browser. Learn fundamental principles through hands-on simulations.",
        "available-experiments": "Available Experiments",
        "lab-progress": "Your Lab Progress",
        "experiments-completed": "Experiments Completed:",
        "data-points": "Data Points Collected:",
        "achievement-level": "Achievement Level:",
        "start-experiment": "Start Experiment",
        "reset-experiment": "Reset",
        "save-results": "Save Results",
        "download-data": "Download Data",
        "select-experiment": "Select an experiment to begin",
        
        // Filter and sort controls
        "filter-by": "Filter by:",
        "filter-all": "All",
        "filter-science": "Science",
        "filter-humanities": "Humanities",
        "filter-sports": "Sports",
        "filter-values": "Values",
        "filter-events": "Events",
        "filter-admin": "Admin",
        "sort-number": "By Number",
        "sort-name": "By Name",
        "sort-category": "By Category",
        
        // Additional modal and UI translations
        "close": "Close",
        "element-details": "Element Details",
        "schedule": "Schedule",
        "classes": "Classes",
        "monday": "Monday",
        "tuesday": "Tuesday", 
        "wednesday": "Wednesday",
        "thursday": "Thursday",
        "friday": "Friday",
        "saturday": "Saturday",
        "sunday": "Sunday",
        
        // Contact page translations
        "contact-title": "Contact Us",
        "contact-info": "Contact Information",
        "address": "Address",
        "phone": "Phone",
        "email": "Email",
        "send-message": "Send Message",
        "your-name": "Your Name",
        "your-email": "Your Email",
        "message": "Message",
        "send": "Send",
          // About page translations
        "our-history": "Our History",
        "our-mission": "Our Mission",
        "our-vision": "Our Vision",
        "faculty": "Faculty",
        "facilities": "Facilities",
        
        // About page detailed translations
        "electronic-formula": "Our Electronic Formula for Success",
        "mission-description": "At SPGE \"Джон Атанасов\", we believe technical education is like semiconductor chemistry - it's all about the right combination of elements to create powerful compounds. Our Periodic Table of Technology represents each specialty as a unique element with its own electronic properties, conductivity, and potential for creating amazing technological alloys.",
        "electronic-structure": "Electronic Structure of Learning",
        "electronic-structure-desc": "Like silicon atoms, each subject has its core concepts (nucleus) surrounded by practical applications (valence electrons) that bond with industry needs",
        "conductive-bonds": "Conductive Bonds Between Specialties", 
        "conductive-bonds-desc": "Our interdisciplinary approach creates strong metallic bonds between programming, electronics, computer systems, and energy technologies",
        "laboratory-innovation": "Laboratory of Innovation",
        "laboratory-innovation-desc": "Every computer lab is a laboratory where students experiment with code, synthesize hardware solutions, and catalyze technological breakthroughs",
        "timeline-title": "Our Electronic Evolution Timeline",
        "facilities-title": "Our Electronic Laboratory Facilities",
        "values-title": "Our Electronic Core Values",
        "facts-title": "Electronic Fun Facts About SPGE",
        "contact-lab-title": "Visit Our Electronic Laboratory",
        
        // Class selector translations
        "select-class": "Select Your Class",
        "all-classes": "All Classes"
    },
      // Bulgarian translations
    bg: {
        // Navigation
        "nav-home": "Начало",
        "nav-classrooms": "Класни стаи",
        "nav-about": "За нас",
        "nav-experiments": "Експерименти",
        "nav-contact": "Контакти",
        
        // Hero section
        "hero-title": "Периодична таблица на СПГЕ \"Джон Атанасов\"",
        "hero-subtitle": "Разгледайте елементите, които правят нашето училище уникално чрез интерактивно химично изживяване",
        "search-placeholder": "Търсене на елементи...",
        
        // Legend
        "legend-title": "Категории елементи",
        "legend-science": "Наука и технологии",
        "legend-humanities": "Хуманитарни науки и езици",
        "legend-sports": "Спорт и дейности",
        "legend-values": "Училищни ценности",
        "legend-events": "Събития и клубове",
        "legend-admin": "Администрация",
        
        // About section
        "about-title": "За нашето училище",
        "about-text-1": "СПГЕ \"Джон Атанасов\" е водеща професионална гимназия, специализирана в електроника, програмиране и възобновяема енергия. Основано през 1968 г., нашето училище е начело на техническото образование в България.",
        "about-text-2": "Нашата мисия е да подготвим следващото поколение технологични иноватори чрез практическо обучение, партньорства с индустрията и съвременни съоръжения.",
        
        // Modal
        "modal-location": "Местоположение:",
        "modal-contact": "Контакт:",
        "modal-facts-title": "Факти за елемента",
        "modal-safety-title": "Данни за безопасност",
        
        // Classrooms section
        "classrooms-title": "Учебни стаи",
        "subject-title": "Предмет",
        "teacher-title": "Учител",
        "room-title": "Стая",
        
        // Experiments page
        "experiments-title": "Виртуална химична лаборатория",
        "experiments-intro": "Изследвайте интерактивни химични експерименти от безопасността на вашия браузър. Научете основни принципи чрез практически симулации.",
        "available-experiments": "Налични експерименти",
        "lab-progress": "Вашият лабораторен прогрес",
        "experiments-completed": "Завършени експерименти:",
        "data-points": "Събрани данни:",
        "achievement-level": "Ниво на постижение:",
        "start-experiment": "Старт на експеримента",
        "reset-experiment": "Нулиране",
        "save-results": "Запази резултати",
        "download-data": "Изтегли данни",
        "select-experiment": "Изберете експеримент, за да започнете",
        
        // Filter and sort controls
        "filter-by": "Филтриране по:",
        "filter-all": "Всички",
        "filter-science": "Наука",
        "filter-humanities": "Хуманитарни",
        "filter-sports": "Спорт",
        "filter-values": "Ценности",
        "filter-events": "Събития",
        "filter-admin": "Администрация",
        "sort-number": "По номер",
        "sort-name": "По име",
        "sort-category": "По категория",
        
        // Additional modal and UI translations
        "close": "Затвори",
        "element-details": "Детайли за елемента",
        "schedule": "Програма",
        "classes": "Класове",
        "monday": "Понеделник",
        "tuesday": "Вторник", 
        "wednesday": "Сряда",
        "thursday": "Четвъртък",
        "friday": "Петък",
        "saturday": "Събота",
        "sunday": "Неделя",
        
        // Contact page translations
        "contact-title": "Свържете се с нас",
        "contact-info": "Информация за контакт",
        "address": "Адрес",
        "phone": "Телефон",
        "email": "Имейл",
        "send-message": "Изпратете съобщение",
        "your-name": "Вашето име",
        "your-email": "Вашият имейл",
        "message": "Съобщение",
        "send": "Изпрати",
          // About page translations
        "our-history": "Нашата история",
        "our-mission": "Нашата мисия",
        "our-vision": "Нашата визия",
        "faculty": "Преподавателски състав",
        "facilities": "Съоръжения",
        
        // About page detailed translations
        "electronic-formula": "Нашата електронна формула за успех",
        "mission-description": "В СПГЕ \"Джон Атанасов\" вярваме, че техническото образование е като полупроводникова химия - всичко се свежда до правилната комбинация от елементи за създаване на мощни съединения. Нашата Периодична таблица на технологиите представя всяка специалност като уникален елемент със собствени електронни свойства, проводимост и потенциал за създаване на невероятни технологични сплави.",
        "electronic-structure": "Електронна структура на обучението",
        "electronic-structure-desc": "Като силициевите атоми, всеки предмет има своите основни концепции (ядро), заобиколени от практически приложения (валентни електрони), които се свързват с индустриалните нужди",
        "conductive-bonds": "Проводими връзки между специалностите",
        "conductive-bonds-desc": "Нашият междудисциплинарен подход създава силни метални връзки между програмирането, електрониката, компютърните системи и енергийните технологии",
        "laboratory-innovation": "Лаборатория на иновациите",
        "laboratory-innovation-desc": "Всяка компютърна лаборатория е лаборатория, където студентите експериментират с код, синтезират хардуерни решения и катализират технологични пробиви",
        "timeline-title": "Нашата електронна еволюционна времева линия",
        "facilities-title": "Нашите електронни лабораторни съоръжения",
        "values-title": "Нашите електронни основни ценности",
        "facts-title": "Електронни забавни факти за СПГЕ",        "contact-lab-title": "Посетете нашата електронна лаборатория",
        "facilities": "Съоръжения",
        
        // Timeline translations
        "timeline-1968-title": "⚡ Основната година - Раждането на електронното образование",
        "timeline-1968-desc": "СПГЕ \"Джон Атанасов\" беше основано като Техническо училище по електроника, започвайки нашата химична реакция на комбиниране на теорията с практическата електронна синтеза.",
        "timeline-1980s-title": "🔬 Разширяване на електронните лаборатории",
        "timeline-1980s-desc": "Бяха построени нашите първи напълно оборудвани електронни лаборатории, включващи аналогови схеми, транзистори и първите цифрови компоненти за студентски експерименти.",
        "timeline-1990s-title": "💻 Цифрова трансформация - Компютърна химия",
        "timeline-1990s-desc": "Въвеждане на компютърни системи и програмни специалности, създаване на нашите първи 9 компютърни лаборатории с над 107 PC работни станции.",
        "timeline-2000s-title": "🌍 Международна катализа - Програми Леонардо да Винчи",
        "timeline-2000s-desc": "СПГЕ започна участие в ЕС програми, като нашият проект MOBELCOM-2000 се класира в топ 9 най-добри практики, изпращайки студенти в Германия и Австрия.",
        "timeline-2004-title": "🏆 Глобално признание - Конкурс Siemens",
        "timeline-2004-desc": "Нашият отбор от 8 студенти постигна 4-то място в проекта Siemens \"JOIN MULTIMEDIA\" сред 1400 отбора от 36 страни.",
        "timeline-present-title": "🚀 Модерна синтеза - Над 5930 завършили",
        "timeline-present-desc": "Днес продължаваме да синтезираме бъдещето с Microsoft IT Academy, CISCO Academy партньорства и авангардно електронно образование.",
        
        // Values section translations
        "value-silicon-title": "Силициева Логика",
        "value-silicon-desc": "Като силиция в микропроцесорите, логическото мислене образува основата на всички наши технологични съединения.",
        "value-germanium-title": "Германиеви Иновации",
        "value-germanium-desc": "Иновациите текат като германиеви полупроводници - адаптират се, провеждат и позволяват революционни технологии.",
        "value-copper-title": "Медна Свързаност",
        "value-copper-desc": "Екипната работа провежда като медни проводници - свързва умове, споделя знания и захранва колаборативни проекти.",
        "value-aluminum-title": "Алуминиева Упоритост",
        "value-aluminum-desc": "Упоритостта е нашият алуминий - лек, но издръжлив, образуващ защитни оксидни слоеве срещу образователните предизвикателства.",
        "value-gold-title": "Златно Съвършенство",
        "value-gold-desc": "Съвършенството свети като златни контакти - високо проводимо, корозионноустойчиво и позволяващо перфектни връзки.",        "value-lithium-title": "Литиева Енергия",
        "value-lithium-desc": "Енергията ни движи като литиеви батерии - съхранява знания, захранва иновации и позволява преносимо обучение.",
        
        // Fun facts translations
        "fact-graduates-desc": "Над 5,930 завършили инженери са синтезирани в нашите електронни лаборатории, формирайки ковалентни връзки с технологичните индустрии по целия свят.",
        "fact-workstations-desc": "107 PC работни станции в 9 компютърни лаборатории образуват нашата кристална решетка от интерактивно обучение и практически експерименти.",
        "fact-foundation-desc": "От 1968 г. непрекъснато катализираме електронното образование, трансформирайки суровите студентски умове в рафинирани технологични професионалисти.",
        "fact-siemens-desc": "4-то място от 1,400 отбора в международния конкурс Siemens доказа високата реактивност и проводимост на нашите студентски таланти.",
        
        // Class selector translations
        "select-class": "Изберете вашия клас",
        "all-classes": "Всички класове"
    }
};

// Keep track of current language
let currentLanguage = localStorage.getItem('language') || 'en';

// Function to get current language
function getCurrentLanguage() {
    return currentLanguage;
}

// Function to switch language
function switchLanguage(lang) {
    // Save selected language
    currentLanguage = lang;
    localStorage.setItem('language', lang);
    
    // Update active button
    document.querySelectorAll('.lang-btn').forEach(btn => {
        btn.classList.toggle('active', btn.dataset.lang === lang);
    });
    
    // Update all text elements with translations
    document.querySelectorAll('[data-lang-key]').forEach(element => {
        const key = element.dataset.langKey;
        
        if (translations[lang] && translations[lang][key]) {
            if (element.tagName === 'INPUT' && element.placeholder) {
                element.placeholder = translations[lang][key];
            } else {
                element.textContent = translations[lang][key];
            }
        }
    });
    
    // Dispatch language change event for other scripts to react
    const event = new CustomEvent('languageChanged', { detail: { language: lang } });
    document.dispatchEvent(event);
}

// Initialize language selector
document.addEventListener('DOMContentLoaded', function() {
    // Load saved language preference
    const savedLanguage = localStorage.getItem('language') || 'en';
    currentLanguage = savedLanguage;
    
    // Set initial language button states
    document.querySelectorAll('.lang-btn').forEach(btn => {
        btn.classList.toggle('active', btn.dataset.lang === currentLanguage);
        btn.addEventListener('click', () => switchLanguage(btn.dataset.lang));
    });
    
    // Listen for language change requests from other scripts
    document.addEventListener('requestLanguageChange', (event) => {
        switchLanguage(event.detail.language);
    });
    
    // Apply initial translations immediately
    switchLanguage(currentLanguage);
    
    // Also check if modal content needs translation on page load
    const modal = document.getElementById('elementModal');
    if (modal && window.currentOpenElement) {
        // Re-translate modal content if it exists
        setTimeout(() => {
            if (typeof window.openElementModal === 'function') {
                window.openElementModal(window.currentOpenElement);
            }
        }, 100);
    }
    
    console.log(`✅ Language system initialized with: ${currentLanguage}`);
});
